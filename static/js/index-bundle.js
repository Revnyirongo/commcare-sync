var SiteJS="object"==typeof SiteJS?SiteJS:{};SiteJS.index=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(i){if(void 0===(o="function"==typeof(r=i)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=i(),!!0){var s=window.Cookies,a=window.Cookies=i();a.noConflict=function(){return window.Cookies=s,a}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+a}}function s(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(a[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return s(e,!1)},o.getJSON=function(e){return s(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))},function(e,t,n){"use strict";n.r(t),n.d(t,"Exports",(function(){return i})),n.d(t,"Cookies",(function(){return s}));var r=n(0),o=n.n(r),i={setupLogTriggers:function(){for(var e=document.getElementsByClassName("log-trigger"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target.closest("a"),n="export-log-"+t.dataset.exportRunId,r=document.getElementById(n),o=t.querySelector(".fa");"closed"===t.dataset.openStatus?(r.style.display="",t.dataset.openStatus="open",o.classList.remove("fa-chevron-down"),o.classList.add("fa-chevron-up")):(r.style.display="none",t.dataset.openStatus="closed",o.classList.remove("fa-chevron-up"),o.classList.add("fa-chevron-down"))}))},addLogStubToTable:function(){var e=document.getElementById("export-run-table").getElementsByTagName("tbody")[0].insertRow(0);return e.insertCell(0).appendChild(document.createTextNode("Now")),e.insertCell(1).appendChild(document.createTextNode("TBD")),e.insertCell(2).appendChild(document.createTextNode("TBD")),e.insertCell(3).appendChild(document.createTextNode("started")),e.insertCell(4).appendChild(document.createTextNode("waiting for log...")),e.insertCell(5).appendChild(document.createTextNode("")),e},initializeExportRunButton:function(e,t){var n=document.getElementById("run-export-button"),r=document.getElementById("force-sync-checkbox");n.addEventListener("click",(function(s){s.preventDefault();var a=r.checked;n.classList.add("is-loading","is-disabled"),document.getElementById("export-status-progress").style.display="inherit";var c=document.getElementById("progress-bar"),u=document.getElementById("progress-bar-message"),d={forceSync:a};fetch(e,{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json","X-CSRFToken":o.a.get("csrftoken")},body:JSON.stringify(d)}).then((function(e){return e.text()})).then((function(e){var r=t.replace("task-id-stub",e),o=i.addLogStubToTable();if("undefined"==typeof CeleryProgressBar){var s="CeleryProgressBar class missing. Did you forget to import celery_progress.js?";return console.error(s),c.classList.add("is-danger"),c.setAttribute("value","100"),void(u.innerText=s)}c.removeAttribute("value"),c.classList.remove("is-danger"),c.classList.remove("is-success"),CeleryProgressBar.initProgressBar(r,{onProgress:function(){u.innerHTML="Running Export..."},onSuccess:function(){c.setAttribute("value","100"),u.innerHTML="Complete!"},onResult:function(e,t){o.cells[2].innerText=t.duration,o.cells[3].innerText=t.status,"completed"===t.status?c.classList.add("is-success"):"failed"===t.status&&(c.classList.add("is-danger"),c.setAttribute("value","100"),u.innerText="Failed!"),o.cells[4].innerHTML="<a onclick=location.reload()>Refresh for log</a>",n.classList.remove("is-loading","is-disabled")}})})).catch((function(e){console.error("Request failed",e)}))}),!1)}},s={get:r.get,set:r.set}},function(e,t,n){n(3),n(1)},function(e,t){}]);